<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <title>Accessories - ORION Hub</title>
</head>
<body>
<div class="mobile-container">
    <header id="header">
        <div class="header-content">
            <div>
                <h1>ORION Hub</h1>
                <p>Accessories</p>
            </div>
        </div>
    </header>

    <nav>
        <a href="#cases">Cases</a>
        <a href="#chargers">Chargers</a>
        <a href="#cables">Cables</a>
        <a href="#phones">Phones</a>
    </nav>

    <div class="main-sections">
        <div class="section" id="accessories">
            <h2>ðŸ‘œ Accessories</h2>
            <p>Discover a wide range of mobile accessories, chargers, cases, headphones, and more to enhance your tech experience.</p>
            <ul class="accessories">
                <li class="accessories-item" id="product-case">
                    <img src="access.webp" alt="Accessories" class="section-image share-image" data-product="Blue Scenery BS950" data-price="UGX 39,500">
                    Blue Scenery BS950<br>
                    <span class="accessories-price">UGX 39,500</span><br>
                    <div class="button-group">
                        <button class="btn" id="buy-case">Buy Now</button>
                        <span class="material-icons share-item" data-product="Blue Scenery BS950" data-price="UGX 39,500">share</span>
                    </div>
                </li>
                <li class="accessories-item" id="product-charger">
                    <img src="charger.jpg" alt="Accessories" class="section-image share-image" data-product="Chargers" data-price="UGX 17,000">
                    Chargers<br>
                    <span class="accessories-price">UGX 17,000</span><br>
                    <div class="button-group">
                        <button class="btn" id="buy-charger">Buy Now</button>
                        <span class="material-icons share-item" data-product="Chargers" data-price="UGX 17,000">share</span>
                    </div>
                </li>
                <li class="accessories-item" id="product-cable">
                    <img src="2 in 1.jpg" alt="Accessories" class="section-image share-image" data-product="2 in 1 USB Cable" data-price="UGX 25,000">
                    2 in 1 USB Cable<br>
                    <span class="accessories-price">UGX 25,000</span><br>
                    <div class="button-group">
                        <button class="btn" id="buy-cable">Buy Now</button>
                        <span class="material-icons share-item" data-product="2 in 1 USB Cable" data-price="UGX 25,000">share</span>
                    </div>
                </li>
                <li class="accessories-item" id="product-phone">
                    <img src="btn.jpg" alt="Accessories" class="section-image share-image" data-product="Button Phone" data-price="UGX 38,000">
                    Button Phone<br>
                    <span class="accessories-price">UGX 38,000</span><br>
                    <div class="button-group">
                        <button class="btn" id="buy-phone">Buy Now</button>
                        <span class="material-icons share-item" data-product="Button Phone" data-price="UGX 38,000">share</span>
                    </div>
                </li>
            </ul>
        </div>
    </div>

    <footer>
        <p>&copy; ORION All rights reserved.</p>
        <button class="btn" id="btn">Back to Home</button>
    </footer>
</div>

<script>
    document.getElementById('btn').addEventListener('click', function() {
        window.location.href = 'index.html';
    });

    // Buy buttons
    ['buy-case', 'buy-charger', 'buy-cable', 'buy-phone'].forEach(id => {
        document.getElementById(id).addEventListener('click', function() {
            const li = this.closest('li');
            const product = li.querySelector('.share-image').getAttribute('data-product');
            const price = li.querySelector('.share-image').getAttribute('data-price');
            const imgSrc = li.querySelector('img').src;
            showBuyForm(product, price, imgSrc);
        });
    });

    function showBuyForm(product, price, imgSrc) {
        const overlay = document.createElement('div');
        overlay.className = 'overlay';
        overlay.style.backgroundColor = 'rgba(0,0,0,0.8)';
        overlay.style.display = 'flex';
        overlay.style.justifyContent = 'center';
        overlay.style.alignItems = 'center';

        const modal = document.createElement('div');
        modal.className = 'buy-modal';
        modal.style.background = 'white';
        modal.style.padding = '20px';
        modal.style.borderRadius = '10px';
        modal.style.maxWidth = '400px';
        modal.style.width = '90%';
        modal.style.maxHeight = '80vh';
        modal.style.overflowY = 'auto';

        modal.innerHTML = `
            <h3>Buy ${product}</h3>
            <img src="${imgSrc}" alt="${product}" style="width:100%; max-width:200px; display:block; margin:10px auto;">
            <p><strong>Price:</strong> ${price}</p>
            <form id="buyForm">
                <label><input type="radio" name="option" value="deliver" checked> Deliver to me</label><br>
                <label><input type="radio" name="option" value="pickup"> I'll pick it up</label><br><br>
                <div id="deliverFields">
                    <input type="text" name="name" placeholder="Full Name" required><br>
                    <input type="tel" name="phone" placeholder="Phone Number" required><br>
                    <textarea name="address" placeholder="Delivery Address" required></textarea><br>
                    <button type="submit" class="btn">Submit Order</button>
                </div>
                <div id="pickupFields" style="display:none;">
                    <input type="text" name="pickupName" placeholder="Full Name" required><br>
                    <input type="tel" name="pickupPhone" placeholder="Phone Number" required><br>
                    <input type="date" name="pickupDate" required><br>
                    <button type="button" id="generateReceipt" class="btn">Generate Receipt</button>
                </div>
            </form>
            <button onclick="overlay.remove()" style="margin-top:10px;">Close</button>
        `;

        overlay.appendChild(modal);
        document.body.appendChild(overlay);

        // Toggle fields
        document.querySelectorAll('input[name="option"]').forEach(radio => {
            radio.addEventListener('change', function() {
                document.getElementById('deliverFields').style.display = this.value === 'deliver' ? 'block' : 'none';
                document.getElementById('pickupFields').style.display = this.value === 'pickup' ? 'block' : 'none';
            });
        });

        // Submit for delivery
        document.getElementById('buyForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const formData = new FormData(this);
            const name = formData.get('name');
            const phone = formData.get('phone');
            const address = formData.get('address');
            const message = `New delivery order:\nProduct: ${product}\nPrice: ${price}\nName: ${name}\nPhone: ${phone}\nAddress: ${address}`;
            const whatsappURL = `https://wa.me/256744759181?text=${encodeURIComponent(message)}`;
            window.open(whatsappURL, '_blank');
            overlay.remove();
        });

        // Generate receipt for pickup
        document.getElementById('generateReceipt').addEventListener('click', function() {
            const formData = new FormData(document.getElementById('buyForm'));
            const name = formData.get('pickupName');
            const phone = formData.get('pickupPhone');
            const date = formData.get('pickupDate');
            const bookingCode = 'BK-' + Math.floor(100000 + Math.random() * 900000);

            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            doc.text('ORION Hub - Booking Receipt', 20, 20);
            doc.text(`Booking Code: ${bookingCode}`, 20, 30);
            doc.text(`Product: ${product}`, 20, 40);
            doc.text(`Price: ${price}`, 20, 50);
            doc.text(`Name: ${name}`, 20, 60);
            doc.text(`Phone: ${phone}`, 20, 70);
            doc.text(`Pickup Date: ${date}`, 20, 80);
            doc.save(`booking-${bookingCode}.pdf`);
            overlay.remove();
        });
    }

    // Share buttons for individual products
    document.querySelectorAll('.share-item, .share-image').forEach(shareBtn => {
        shareBtn.addEventListener('click', async () => {
            const product = shareBtn.getAttribute('data-product');
            const price = shareBtn.getAttribute('data-price');
            const id = shareBtn.closest('li').id;
            const imgSrc = shareBtn.closest('li').querySelector('img').src;
            const shareData = {
                title: `Check out ${product} on ORION Hub`,
                text: `Amazing deal: ${product} for ${price}. Image: ${imgSrc} Shop now on ORION Hub!`,
                url: window.location.href + '#' + id
            };

            if (navigator.share) {
                try {
                    await navigator.share(shareData);
                    console.log('Product shared successfully');
                } catch (err) {
                    console.error('Error sharing:', err);
                }
            } else {
                alert('Sharing not supported on this browser. Copy the link: ' + window.location.href + '#' + id + ' Image: ' + imgSrc);
            }
        });
    });

    // Scroll to hash on load and set meta for sharing
    if (window.location.hash) {
        const element = document.querySelector(window.location.hash);
        if (element) {
            element.scrollIntoView({ behavior: 'smooth' });
            const img = element.querySelector('img');
            if (img) {
                // Set Open Graph meta for sharing
                setMetaTag('og:image', img.src);
                setMetaTag('og:title', `Check out ${element.querySelector('.share-image').getAttribute('data-product')} on ORION Hub`);
                setMetaTag('og:description', `Amazing deal: ${element.querySelector('.share-image').getAttribute('data-product')} for ${element.querySelector('.share-image').getAttribute('data-price')}. Shop now on ORION Hub!`);
                setMetaTag('og:url', window.location.href);
            }
        }
    }

    function setMetaTag(property, content) {
        let meta = document.querySelector(`meta[property="${property}"]`);
        if (!meta) {
            meta = document.createElement('meta');
            meta.setAttribute('property', property);
            document.head.appendChild(meta);
        }
        meta.setAttribute('content', content);
    }
</script>

<script src="script.js"></script>
</body>
</html>